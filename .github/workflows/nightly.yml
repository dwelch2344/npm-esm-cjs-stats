name: "node index cache"
on:
  schedule:
    - cron: "7 16 * * *"

jobs:
  crawl:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
      - run: npm i
      - name: Crawl
        env:
          NPM_TOKEN: "${{ secrets.NPMJS_TOKEN }}"
        run: |
          npm run crawl:debug 
      - run: git --no-pager diff && git status
      - run: |
          ls 
          ls -alh data

      # - name: commit changes
      #   uses: elstudio/actions-js-build/commit@v4
      #   with:
      #     commitMessage: "curl \"https://${{ matrix.kind }}.org/dist/index.tab\" (and .json)"